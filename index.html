<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Fruit Coin VIP</title>
    
    <script src='//libtl.com/sdk.js' data-zone='10278425' data-sdk='show_10278425'></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root { --bg:#1a0b2e; --card:#2d1b4e; --gold:#ffd700; --accent:#ff007a; --text:#fff; --receipt-bg:#f5f6fa; --receipt-txt:#2f3640; }
        * { box-sizing:border-box; user-select:none; -webkit-tap-highlight-color:transparent; }
        body { background:radial-gradient(circle at 50% 30%,#431d75 0%,#1a0b2e 80%); color:var(--text); font-family:'Montserrat',sans-serif; min-height:100vh; display:flex; flex-direction:column; align-items:center; padding:15px; overflow:hidden; }
        #banScreen { position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:9999; display:none; justify-content:center; align-items:center; color:red; font-weight:700; }
        .top-bar { width:100%; display:flex; justify-content:space-between; align-items:center; background:rgba(0,0,0,.3); padding:10px 20px; border-radius:50px; border:1px solid rgba(255,215,0,.3); backdrop-filter:blur(10px); margin-bottom:10px; }
        .currency { display:flex; flex-direction:column; align-items:center; }
        .curr-label { font-size:9px; color:#aaa; letter-spacing:1px; }
        .curr-val { font-size:18px; font-weight:900; }
        .usd { color:#2ecc71; text-shadow:0 0 10px rgba(46,204,113,.5); }
        .coin { color:var(--gold); text-shadow:0 0 10px rgba(255,215,0,.5); }
        .pet-stage { flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; position:relative; width:100%; }
        
        /* ESTILO PARA LA IMAGEN DEL GATO */
        .pet-avatar { width: 200px; height: 200px; object-fit: contain; filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.5)); cursor: pointer; transition: transform 0.1s; }
        .pet-avatar:active { transform: scale(0.95); }
        .pet-avatar.sleeping { filter:grayscale(1); opacity: 0.5; }
        
        .pet-bubble { background:#fff; color:#000; padding:10px 20px; border-radius:20px 20px 20px 0; font-size:12px; font-weight:700; margin-bottom:10px; opacity:0; position:absolute; top:10%; right:20%; box-shadow:0 5px 15px rgba(0,0,0,.3); z-index:5; }
        .sleep-z { position:absolute; top:20%; right:30%; color:#aaa; font-weight:700; font-size:30px; animation:zzz 2s infinite; display:none; }
                           .menu-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; width:100%; padding:0 20px 20px 20px; }
        .menu-btn { background:var(--card); border:1px solid rgba(255,255,255,.1); padding:12px; border-radius:12px; display:flex; align-items:center; justify-content:center; gap:8px; color:#fff; font-size:10px; font-weight:700; cursor:pointer; text-align:center; }
        
        .food-belt { width:100%; background:rgba(255,255,255,.05); border-radius:20px 20px 0 0; padding:20px; display:flex; justify-content:space-around; align-items:center; border-top:1px solid rgba(255,255,255,.1); }
        .food-item { display:flex; flex-direction:column; align-items:center; gap:5px; cursor:pointer; position:relative; transition:0.3s; }
        .food-item:active { transform:scale(.9); }
        .food-icon { font-size:35px; background:rgba(255,255,255,.1); width:60px; height:60px; display:flex; justify-content:center; align-items:center; border-radius:50%; border:2px solid transparent; position:relative; overflow:hidden;}
        .food-count { position:absolute; top:-5px; right:-5px; background:var(--accent); color:#fff; font-size:10px; padding:2px 6px; border-radius:10px; font-weight:700; z-index:5; }
        .food-item.cooldown { pointer-events:none; opacity:0.6; filter:grayscale(0.8); }
        .food-timer { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; justify-content:center; align-items:center; font-weight:900; font-size:24px; color:#fff; z-index:10; border-radius:50%; }

        /* VENTANA UNIVERSAL (BONITA) */
        .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.95); z-index:100; display:none; flex-direction:column; justify-content:center; align-items:center; }
        
        .shop-card { 
            background:linear-gradient(145deg,#2d1b4e,#1a0b2e); 
            border:2px solid var(--gold); 
            padding:30px; 
            border-radius:20px; 
            text-align:center; 
            width:85%; 
            max-width:320px; 
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.2); 
        }
        
        .btn-buy { background:linear-gradient(90deg,#f1c40f,#f39c12); color:#000; border:none; padding:15px; width:100%; border-radius:50px; font-weight:900; font-size:14px; margin-top:20px; cursor:pointer; animation:pulse 2s infinite; }
        
        .invite-box { background:#222; width:90%; max-width:350px; padding:25px; border-radius:15px; border:1px solid #444; text-align:center; }
        .invite-link-box { background:#111; padding:10px; border-radius:8px; border:1px solid #333; font-family:monospace; color:#00d2d3; margin:15px 0; word-break:break-all; font-size:12px; }
        .btn-copy { background:#333; color:#fff; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; font-weight:700; font-size:11px; margin-bottom:10px; }
        .btn-share { background:#0088cc; color:#fff; border:none; padding:12px; width:100%; border-radius:8px; font-weight:700; cursor:pointer; display:flex; justify-content:center; gap:8px; }
        .receipt-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.95); z-index:300; display:none; flex-direction:column; justify-content:center; align-items:center; }
        .receipt-ticket { background:var(--receipt-bg); color:var(--receipt-txt); width:90%; max-width:340px; padding:20px; border-radius:10px; position:relative; box-shadow:0 0 20px rgba(255,255,255,.1); font-family:'Share Tech Mono',monospace; }
        .receipt-ticket::before { content:''; position:absolute; top:-5px; left:10px; right:10px; height:10px; background:var(--receipt-bg); border-radius:5px; z-index:-1; }
        .receipt-header { text-align:center; border-bottom:2px dashed #ccc; padding-bottom:15px; margin-bottom:15px; }
        .receipt-row { display:flex; justify-content:space-between; margin-bottom:8px; font-size:12px; }
        .receipt-total { border-top:2px dashed #ccc; padding-top:10px; margin-top:10px; display:flex; justify-content:space-between; font-weight:700; font-size:16px; }
        .btn-support { background:#27ae60; color:#fff; width:100%; padding:12px; border:none; font-family:'Montserrat',sans-serif; border-radius:8px; font-weight:700; margin-top:15px; cursor:pointer; display:flex; justify-content:center; gap:8px; }
        .tutorial-box { background:#2d1b4e; border:2px solid #00d2d3; padding:25px; border-radius:20px; text-align:center; width:90%; max-width:320px; position:relative; }
        .tut-dots { display:flex; justify-content:center; gap:5px; margin-top:15px; }
        .tut-dot { width:8px; height:8px; background:#444; border-radius:50%; }
        .tut-dot.active { background:#00d2d3; }
        .btn-tut { background:#00d2d3; color:black; width:100%; padding:12px; border-radius:10px; border:none; font-weight:bold; margin-top:20px; cursor:pointer; }
        .float-txt { position:absolute; font-weight:900; font-size:20px; pointer-events:none; animation:up 1s forwards; z-index:20; text-shadow:0 2px 5px #000; }
        @keyframes up { 0%{transform:translateY(0) scale(.5);opacity:0} 50%{opacity:1;transform:translateY(-50px) scale(1.2)} 100%{transform:translateY(-100px) opacity:0} }
    </style>
</head>
<body>
    <div id="banScreen">SOLO M√ìVIL</div>
    <div class="top-bar">
        <div class="currency"><span class="curr-label">VIP BALANCE</span><span class="curr-val usd">$<span id="usd">0.0000</span></span></div>
        <div class="currency"><span class="curr-label">PET COINS</span><span class="curr-val coin" id="coins">0</span></div>
    </div>
    
    <div class="pet-stage">
        <div class="pet-bubble" id="bubble">¬°Hola Socio! üò∫</div><div class="sleep-z" id="sleepZ">Zzz...</div>
        
        <img src="https://i.gifer.com/ZKZg.gif" 
             class="pet-avatar" 
             id="pet" 
             onclick="tapPet()" 
             alt="Mascota">
             
        <div style="font-size:10px; color:#aaa; margin-top:20px;">Estado: <span id="statusPet" style="color:#2ecc71">Activo</span></div>
    </div>
    
    <div class="menu-grid">
        <div class="menu-btn" onclick="openInviteModal()"><i class="fa-solid fa-users" style="color:#0984e3"></i> INVITAR</div>
        <div class="menu-btn" onclick="exchange()"><i class="fa-solid fa-right-left" style="color:#f368e0"></i> CAMBIAR COINS</div>
        <div class="menu-btn" onclick="openChannel()"><i class="fa-brands fa-telegram" style="color:#3498db"></i> CANAL OFICIAL</div>
        <div class="menu-btn" onclick="withdraw()"><i class="fa-solid fa-gem" style="color:#2ecc71"></i> RETIRAR</div>
    </div>

    <div class="food-belt">
        <div class="food-item" id="item0" onclick="feed(0)">
            <div class="food-count" id="cnt0">5</div>
            <div class="food-icon" style="border-color:#e74c3c">
                <i class="fa-solid fa-apple-whole" style="color:#e74c3c"></i>
                <div class="food-timer" id="timer0">5</div>
            </div>
            <span style="font-size:10px">Manzana</span>
        </div>
        <div class="food-item" id="item1" onclick="feed(1)">
            <div class="food-count" id="cnt1">3</div>
            <div class="food-icon" style="border-color:#3498db">
                <i class="fa-solid fa-fish" style="color:#3498db"></i>
                <div class="food-timer" id="timer1">5</div>
            </div>
            <span style="font-size:10px">Salm√≥n</span>
        </div>
        <div class="food-item" id="item2" onclick="feed(2)">
            <div class="food-count" id="cnt2">1</div>
            <div class="food-icon" style="border-color:#f1c40f">
                <i class="fa-solid fa-pizza-slice" style="color:#f1c40f"></i>
                <div class="food-timer" id="timer2">5</div>
            </div>
            <span style="font-size:10px">Pizza VIP</span>
        </div>
    </div>
    
    <div class="modal-overlay" id="universalModal">
        <div class="shop-card">
            <div id="uniIcon" style="font-size:50px; margin-bottom:15px">‚ö†Ô∏è</div>
            <h2 id="uniTitle" style="margin:0; color:#fff; font-size: 22px">TITULO</h2>
            <p id="uniMsg" style="color:#ccc; font-size:14px; margin:15px 0">Mensaje aqu√≠.</p>
            <button class="btn-buy" onclick="closeModals()">ENTENDIDO</button>
        </div>
    </div>
    <div class="modal-overlay" id="shopModal"><div class="shop-card"><i class="fa-solid fa-basket-shopping" style="font-size:50px; color:var(--gold); margin-bottom:20px"></i><h2 style="margin:0; color:#fff">¬°NEVERA VAC√çA!</h2><p style="color:#aaa; font-size:13px; margin:15px 0">Tu mascota necesita comida. Ve un video para comprar m√°s.</p><button class="btn-buy" onclick="buyFood()">VER VIDEO (+COMIDA)</button><div style="margin-top:15px; font-size:10px; color:#aaa; cursor:pointer" onclick="closeModals()">Cerrar</div></div></div>
    <div class="modal-overlay" id="sleepModal"><div class="shop-card" style="border-color:#8e44ad"><i class="fa-solid fa-bed" style="font-size:50px; color:#8e44ad; margin-bottom:20px"></i><h2 style="margin:0; color:#fff">MASCOTA DORMIDA</h2><p style="color:#aaa; font-size:13px; margin:15px 0">Tu mascota se ha cansado (L√≠mite Diario). D√©jala descansar hasta ma√±ana.</p><button class="btn-buy" style="background:#8e44ad; color:#fff" onclick="closeModals()">ENTENDIDO</button></div></div>
    <div class="modal-overlay" id="inviteModal"><div class="invite-box"><i class="fa-solid fa-gift" style="font-size:40px; color:#00d2d3; margin-bottom:10px"></i><h3 style="color:#fff; margin:0">¬°GANA DINERO REAL!</h3><p style="color:#ccc; font-size:12px; margin:10px 0">Invita amigos y gana <b>$0.10 USD</b> por cada usuario activo.</p><div class="invite-link-box" id="myLink">Cargando...</div><button class="btn-copy" onclick="copyLink()"><i class="fa-solid fa-copy"></i> COPIAR ENLACE</button><button class="btn-share" onclick="shareLink()"><i class="fa-brands fa-telegram"></i> ENVIAR A AMIGOS</button><button style="width:100%; border:none; background:none; color:#777; margin-top:15px; cursor:pointer" onclick="closeModals()">Cerrar</button></div></div>
    <div class="modal-overlay" id="tutorialModal" style="z-index:999"><div class="tutorial-box"><div style="font-size:50px; margin-bottom:10px" id="tutIcon">üò∫</div><h2 style="color:#00d2d3; margin:0" id="tutTitle">¬°HOLA SOCIO!</h2><p style="color:#ccc; font-size:13px; min-height:50px" id="tutDesc">Soy tu nueva Mascota Crypto. Cu√≠dame y te har√© rico.</p><div class="tut-dots"><div class="tut-dot active" id="dot0"></div><div class="tut-dot" id="dot1"></div><div class="tut-dot" id="dot2"></div><div class="tut-dot" id="dot3"></div></div><button class="btn-tut" onclick="nextTut()">SIGUIENTE</button></div></div>
    <div class="receipt-modal" id="receiptModal"><div class="receipt-ticket"><div class="receipt-header"><i class="fa-solid fa-receipt" style="font-size:30px; margin-bottom:5px"></i><br>COMPROBANTE DE RETIRO</div><div class="receipt-row"><span>FECHA:</span><span id="recDate">...</span></div><div class="receipt-row"><span>HORA:</span><span id="recTime">...</span></div><div class="receipt-row"><span>USUARIO:</span><span id="recUser">...</span></div><div class="receipt-row"><span>ID TRANS:</span><span id="recID">...</span></div><div class="receipt-total"><span>TOTAL:</span><span id="recAmount">$0.00</span></div><div style="text-align:center; margin-top:15px; font-weight:700; color:#f39c12; border:1px solid #f39c12; padding:5px; border-radius:4px">PENDIENTE DE PAGO</div><p style="font-size:10px; text-align:center; margin-top:10px; color:#555">Captura este recibo y env√≠alo a soporte.</p><button class="btn-support" onclick="contactSupport()"><i class="fa-solid fa-headset"></i> ENVIAR A SOPORTE</button><button style="width:100%; border:none; background:none; color:#999; margin-top:10px; cursor:pointer" onclick="location.reload()">Cerrar</button></div></div>
        <script>
        const tg = window.Telegram.WebApp; 
        tg.expand();

        const ADS_ID = "18897";
        // VERSI√ìN SEGURA CON BLOQUEO MULTI
        const KEY = 'crypto_pet_v17_security_pro'; 
        const CHANNEL_URL = "https://t.me/noticebuddy"; 
        const BOT_USERNAME = "YougamefavoriteBot"; 
        const SUPPORT_BOT = "https://t.me/AtencionYougamefavoriteBot";
        
        const MAX_DAILY_ADS = 15; 
        const COIN_RATE = 1000; 
        const TARGET = 2.00;
        
        let user = { usd:0, coins:0, food:[5,3,1], adsToday:0, lastDate:"", jackpotToday: false, seenTut:false };
        
        const steps = [
            {icon:"üîí", title:"SEGURIDAD", desc:"Dispositivo vinculado. No uses multicuentas o ser√°s baneado."},
            {icon:"üò∫", title:"¬°HOLA SOCIO!", desc:"Cuida a tu mascota y gana dinero. A veces doy premios sorpresa."},
            {icon:"üí∞", title:"MONEDAS Y USD", desc:"Gana monedas y c√°mbialas por D√≥lares. ¬°1000 Coins = $0.01!"},
            {icon:"üì∫", title:"RECARGA", desc:"Si se acaba la comida, ve un video en la tienda."}
        ];
        let stepIdx = 0;

        // --- SEGURIDAD ANTIMULTI ---
        function checkSecurity(){
            let currentID = tg.initDataUnsafe?.user?.id;
            if(!currentID) return; 

            let owner = localStorage.getItem('device_owner_id');

            if(owner){
                if(owner != currentID){
                    document.body.innerHTML = "<div style='background:black;color:red;height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;font-family:sans-serif'><h1>üö´ MULTI-CUENTA DETECTADA</h1><p>Este dispositivo ya pertenece a otro usuario.</p></div>";
                    throw new Error("Multicuenta bloqueada"); 
                }
            } else {
                localStorage.setItem('device_owner_id', currentID);
            }
        }

        function checkStatus(){
            let t = new Date().toDateString();
            if(user.lastDate !== t){ 
                user.adsToday = 0; user.lastDate = t; user.jackpotToday = false; save(); 
            }
            updateVisuals();
            if(!user.seenTut){ openTutorial(); }
        }

        // FUNCI√ìN PARA MENSAJES BONITOS
        function msg(title, text, icon="‚ö†Ô∏è"){
            document.getElementById('uniIcon').innerText = icon;
            document.getElementById('uniTitle').innerText = title;
            document.getElementById('uniMsg').innerText = text;
            document.getElementById('universalModal').style.display = 'flex';
        }

        function openTutorial(){ document.getElementById('tutorialModal').style.display = 'flex'; stepIdx = 0; updateTut(); }
        function updateTut(){ if(stepIdx>=steps.length){closeTut();return} let s=steps[stepIdx]; document.getElementById('tutIcon').innerText=s.icon; document.getElementById('tutTitle').innerText=s.title; document.getElementById('tutDesc').innerText=s.desc; for(let i=0;i<4;i++){document.getElementById('dot'+i).className=(i===stepIdx)?'tut-dot active':'tut-dot'} }
        function nextTut(){ stepIdx++; updateTut(); }
        function closeTut(){ document.getElementById('tutorialModal').style.display = 'none'; user.seenTut = true; save(); }

        function updateVisuals(){
            let p = document.getElementById('pet');
            let z = document.getElementById('sleepZ');
            let s = document.getElementById('statusPet');
            
            if(user.adsToday >= MAX_DAILY_ADS){
                p.classList.add('sleeping'); p.innerText = 'üò¥'; z.style.display = 'block';
                s.innerText = "Durmiendo"; s.style.color = "#aaa";
            } else {
                p.classList.remove('sleeping'); p.innerText = 'üò∫'; z.style.display = 'none';
                s.innerText = "Activo"; s.style.color = "#2ecc71";
            }
            
            document.getElementById('usd').innerText = user.usd.toFixed(4);
            document.getElementById('coins').innerText = Math.floor(user.coins);
            document.getElementById('cnt0').innerText = user.food[0];
            document.getElementById('cnt1').innerText = user.food[1];
            document.getElementById('cnt2').innerText = user.food[2];
        }

        function feed(t){
            checkStatus();
            if(user.adsToday >= MAX_DAILY_ADS){ document.getElementById('sleepModal').style.display = 'flex'; return; }
            if(user.food[t] <= 0){ document.getElementById('shopModal').style.display = 'flex'; return; }
            let item = document.getElementById('item'+t);
            if(item.classList.contains('cooldown')) return; 

            user.food[t]--;
            animatePet();
            activateCooldown(t, 5); 

            if(!user.jackpotToday && Math.random() < 0.3) { 
                let jackpot = (Math.random() * (0.05 - 0.02) + 0.02); 
                user.usd += jackpot;
                user.jackpotToday = true; 
                say(`¬°PREMIO GORDO! üíé`);
                floatTxt(`+$${jackpot.toFixed(4)}`, '#00d2d3');
                tg.HapticFeedback.notificationOccurred('success');
            } else {
                let rand = Math.random();
                if(rand < 0.2) {
                     user.usd += 0.001;
                     say("¬°Bien! +$0.0010");
                     floatTxt("+$0.0010", '#2ecc71');
                } else {
                     let c = Math.floor(Math.random() * 50) + 50;
                     user.coins += c;
                     say("¬°Coins! üí∞");
                     floatTxt(`+${c} COINS`, '#ffd700');
                }
                tg.HapticFeedback.impactOccurred('light');
            }
            save();
        }

        function activateCooldown(idx, seconds){
            let item = document.getElementById('item'+idx);
            let timerDisplay = document.getElementById('timer'+idx);
            item.classList.add('cooldown'); timerDisplay.style.display = 'flex'; timerDisplay.innerText = seconds;
            let interval = setInterval(() => {
                seconds--; timerDisplay.innerText = seconds;
                if(seconds <= 0){ clearInterval(interval); item.classList.remove('cooldown'); timerDisplay.style.display = 'none'; }
            }, 1000);
        }

        function buyFood(){
            checkStatus();
            if(user.adsToday >= MAX_DAILY_ADS){ closeModals(); document.getElementById('sleepModal').style.display = 'flex'; return; }
            const a = window.Adsgram.init({ blockId: ADS_ID });
            a.show().then(() => {
                user.food = [5, 3, 1]; user.adsToday++; closeModals(); say("¬°Recargado! üîã"); save();
                if(user.adsToday >= MAX_DAILY_ADS) setTimeout(() => { updateVisuals() }, 1000);
            }).catch(() => { 
                msg("UPS...", "Error cargando anuncios. Intenta luego.", "üì°"); 
            });
        }

        function getMyLink(){ let i = tg.initDataUnsafe?.user?.id || "0000"; return `https://t.me/${BOT_USERNAME}?start=ref_${i}`; }
        function openInviteModal(){ document.getElementById('myLink').innerText = getMyLink(); document.getElementById('inviteModal').style.display = 'flex'; }
        
        function copyLink(){ 
            let l = getMyLink(); 
            navigator.clipboard.writeText(l).then(() => { 
                msg("¬°ENLACE COPIADO!", "Ya puedes pegarlo donde quieras.", "üìã");
            }).catch(() => { tg.showAlert(l); }); 
        }
        
        function shareLink(){ let l = getMyLink(); tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(l)}&text=${encodeURIComponent("Entra a ganar dinero real con mi mascota:")}`); }

        function withdraw(){
            if(user.usd < TARGET){
                let f = (TARGET - user.usd).toFixed(4);
                msg("FALTAN FONDOS", `Tienes $${user.usd.toFixed(4)}. El m√≠nimo es $${TARGET}. Te faltan $${f}.`, "üìâ");
                return;
            }
            let a = user.usd.toFixed(2); 
            user.usd = 0; save();
            let n = new Date(); let u = tg.initDataUnsafe?.user?.first_name || "VIP";
            document.getElementById('recDate').innerText = n.toLocaleDateString(); document.getElementById('recTime').innerText = n.toLocaleTimeString(); document.getElementById('recUser').innerText = u.substring(0, 15); document.getElementById('recAmount').innerText = `$${a} USD`; document.getElementById('recID').innerText = "#" + Math.floor(Math.random() * 900000 + 100000);
            document.getElementById('receiptModal').style.display = 'flex';
        }

        function exchange(){
            if(user.coins < 1000){
                msg("¬°EPA SOCIO!", "Necesitas al menos 1000 Coins para ir al Banco.", "üè¶");
                return;
            }
            tg.showConfirm(`TASA: 1000 Coins = $0.01 USD\n\n¬øCambiar todo?`, (ok) => {
                if(ok){
                    let v = (user.coins / COIN_RATE) * 0.01; 
                    let s = user.coins;
                    user.coins = 0;
                    user.usd += v;
                    save();
                    msg("¬°CAMBIO EXITOSO!", `Cambiaste ${s} Coins por $${v.toFixed(4)} USD.`, "ü§ë");
                }
            });
        }

        function contactSupport(){ tg.openTelegramLink(SUPPORT_BOT); }
        function openChannel(){ tg.openTelegramLink(CHANNEL_URL); }
        
        function closeModals(){ 
            document.getElementById('shopModal').style.display = 'none'; 
            document.getElementById('sleepModal').style.display = 'none'; 
            document.getElementById('inviteModal').style.display = 'none'; 
            document.getElementById('tutorialModal').style.display = 'none'; 
            document.getElementById('universalModal').style.display = 'none';
        }
        
        function animatePet(){ let p = document.getElementById('pet'); p.style.transform = "scale(1.3) rotate(10deg)"; setTimeout(() => { p.style.transform = "scale(1)"; }, 200); }
        function say(t){ let b = document.getElementById('bubble'); b.innerText = t; b.style.opacity = 1; setTimeout(() => { b.style.opacity = 0; }, 2000); }
        function floatTxt(t, c){ let e = document.createElement('div'); e.className = 'float-txt'; e.innerText = t; e.style.color = c; e.style.left = '50%'; e.style.top = '40%'; document.body.appendChild(e); setTimeout(() => e.remove(), 1000); }
        function tapPet(){ checkStatus(); (user.adsToday >= MAX_DAILY_ADS) ? say("Zzz... üò¥") : say("¬°Comida! üò∫"); }
        function load(){ 
            checkSecurity();
            tg.CloudStorage.getItem(KEY, (e, v) => { if(!e && v){ try { let c = JSON.parse(v); if(c.usd > user.usd) user = c; } catch(x) {} } checkStatus(); }); 
            if(localStorage.getItem(KEY)){ try { let l = JSON.parse(atob(localStorage.getItem(KEY))); if(l.usd > user.usd) user = l; } catch(x) {} } 
            checkStatus(); 
        }
        function save(){ let s = JSON.stringify(user); localStorage.setItem(KEY, btoa(s)); tg.CloudStorage.setItem(KEY, s); updateVisuals(); }

        if(tg.platform === 'unknown' || tg.platform === 'tdesktop' || tg.platform === 'web'){ document.getElementById('banScreen').style.display = 'flex'; } else { load(); }
    </script>
</body>
</html>
