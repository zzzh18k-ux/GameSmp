   <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Crypto Pet VIP</title>
    
    <script src='//libtl.com/sdk.js' data-zone='10278425' data-sdk='show_10278425'></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root { 
            --bg: #1a0b2e; 
            --card: #2d1b4e; 
            --gold: #ffd700; 
            --accent: #ff007a;
            --text: #ffffff;
            --receipt-bg: #f5f6fa;
            --receipt-txt: #2f3640;
        }
        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            background: radial-gradient(circle at 50% 30%, #431d75 0%, #1a0b2e 80%);
            color: var(--text); font-family: 'Montserrat', sans-serif;
            min-height: 100vh; display: flex; flex-direction: column; align-items: center; 
            padding: 15px; overflow: hidden;
        }

        #banScreen { position: fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:9999; display:none; justify-content:center; align-items:center; color:red; font-weight:bold;}

        /* HEADER DE LUJO */
        .top-bar {
            width: 100%; display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.3); padding: 10px 20px; border-radius: 50px;
            border: 1px solid rgba(255, 215, 0, 0.3); backdrop-filter: blur(10px);
            margin-bottom: 10px;
        }
        .currency { display: flex; flex-direction: column; align-items: center; }
        .curr-label { font-size: 9px; color: #aaa; letter-spacing: 1px; }
        .curr-val { font-size: 18px; font-weight: 900; }
        .usd { color: #2ecc71; text-shadow: 0 0 10px rgba(46, 204, 113, 0.5); }
        .coin { color: var(--gold); text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }

        /* ESCENARIO DE LA MASCOTA */
        .pet-stage {
            flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center;
            position: relative; width: 100%;
        }
        
        .pet-avatar {
            font-size: 120px; filter: drop-shadow(0 0 20px rgba(255, 0, 122, 0.4));
            transition: transform 0.2s; cursor: pointer;
            animation: bounce 2s infinite;
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        
        .pet-avatar.sleeping {
            filter: grayscale(1) drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
            animation: none; transform: scale(0.9) rotate(5deg);
        }

        .pet-bubble {
            background: white; color: black; padding: 10px 20px; border-radius: 20px 20px 20px 0;
            font-size: 12px; font-weight: bold; margin-bottom: 10px; opacity: 0;
            transition: opacity 0.3s; position: absolute; top: 10%; right: 20%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 5;
        }
        .sleep-z {
            position: absolute; top: 20%; right: 30%; color: #aaa; font-weight: bold; font-size: 30px;
            animation: zzz 2s infinite; display: none;
        }
        @keyframes zzz { 0% { opacity: 0; transform: translate(0, 0) scale(0.5); } 50% { opacity: 1; } 100% { opacity: 0; transform: translate(20px, -30px) scale(1.2); } }

        /* BARRA DE COMIDA */
        .food-belt {
            width: 100%; background: rgba(255, 255, 255, 0.05); 
            border-radius: 20px 20px 0 0; padding: 20px;
            display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .food-item {
            display: flex; flex-direction: column; align-items: center; gap: 5px;
            cursor: pointer; transition: transform 0.1s; position: relative;
        }
        .food-item:active { transform: scale(0.9); }
        .food-icon { 
            font-size: 35px; background: rgba(255,255,255,0.1); width: 60px; height: 60px;
            display: flex; justify-content: center; align-items: center; border-radius: 50%;
            border: 2px solid transparent;
        }
        .food-count { 
            position: absolute; top: -5px; right: -5px; background: var(--accent); 
            color: white; font-size: 10px; padding: 2px 6px; border-radius: 10px; font-weight: bold;
        }

        /* MEN√ö DE TAREAS */
        .menu-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 100%; padding: 0 20px 20px 20px;
        }
        .menu-btn {
            background: var(--card); border: 1px solid rgba(255,255,255,0.1); padding: 12px;
            border-radius: 12px; display: flex; align-items: center; justify-content: center; gap: 8px;
            color: white; font-size: 10px; font-weight: bold; cursor: pointer; text-align: center;
        }
        
        /* RECIBO DE RETIRO */
        .receipt-modal {
            position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95);
            z-index: 300; display: none; flex-direction: column; justify-content: center; align-items: center;
        }
        .receipt-ticket {
            background: var(--receipt-bg); color: var(--receipt-txt); width: 90%; max-width: 340px;
            padding: 20px; border-radius: 10px; position: relative;
            box-shadow: 0 0 20px rgba(255,255,255,0.1); font-family: 'Share Tech Mono', monospace;
        }
        .receipt-ticket::before {
            content: ''; position: absolute; top: -5px; left: 10px; right: 10px; height: 10px;
            background: var(--receipt-bg); border-radius: 5px; z-index: -1;
        }
        .receipt-header { text-align: center; border-bottom: 2px dashed #ccc; padding-bottom: 15px; margin-bottom: 15px; }
        .receipt-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px; }
        .receipt-total { border-top: 2px dashed #ccc; padding-top: 10px; margin-top: 10px; display: flex; justify-content: space-between; font-weight: bold; font-size: 16px; }
        .receipt-status { text-align: center; margin-top: 15px; font-weight: bold; color: #f39c12; border: 1px solid #f39c12; padding: 5px; border-radius: 4px; }
        
        .btn-support {
            background: #27ae60; color: white; width: 100%; padding: 12px; border: none; font-family: 'Montserrat', sans-serif;
            border-radius: 8px; font-weight: bold; margin-top: 15px; cursor: pointer; display: flex; justify-content: center; gap: 8px;
        }

        /* MODALES */
        .modal-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.95);
            z-index: 100; display: none; flex-direction: column; justify-content: center; align-items: center;
        }
        .shop-card {
            background: linear-gradient(145deg, #2d1b4e, #1a0b2e); border: 2px solid var(--gold);
            padding: 30px; border-radius: 20px; text-align: center; width: 85%; max-width: 320px;
        }
        .btn-buy {
            background: linear-gradient(90deg, #f1c40f, #f39c12); color: black; border: none;
            padding: 15px; width: 100%; border-radius: 50px; font-weight: 900; font-size: 14px;
            margin-top: 20px; cursor: pointer; animation: pulse 2s infinite;
        }
        
        .float-txt { position: absolute; font-weight: 900; font-size: 20px; pointer-events: none; animation: up 1s forwards; z-index: 20; text-shadow: 0 2px 5px black; }
        @keyframes up { 0% { transform: translateY(0) scale(0.5); opacity: 0; } 50% { opacity: 1; transform: translateY(-50px) scale(1.2); } 100% { transform: translateY(-100px) opacity: 0; } }
    </style>
</head>
<body>
  <div id="banScreen">SOLO M√ìVIL</div>

    <div class="top-bar">
        <div class="currency">
            <span class="curr-label">VIP BALANCE</span>
            <span class="curr-val usd">$<span id="usd">0.00</span></span>
        </div>
        <div class="currency">
            <span class="curr-label">PET COINS</span>
            <span class="curr-val coin" id="coins">0</span>
        </div>
    </div>

    <div class="pet-stage">
        <div class="pet-bubble" id="bubble">¬°Tengo Hambre! üòø</div>
        <div class="sleep-z" id="sleepZ">Zzz...</div>
        <div class="pet-avatar" id="pet" onclick="tapPet()">üò∫</div>
        <div style="font-size:10px; color:#aaa; margin-top:20px;">Estado: <span id="statusPet" style="color:#2ecc71">Activo</span></div>
    </div>

    <div class="menu-grid">
        <div class="menu-btn" onclick="inviteFriends()"><i class="fa-solid fa-users" style="color:#0984e3"></i> INVITAR ($0.10)</div>
        <div class="menu-btn" onclick="exchange()"><i class="fa-solid fa-right-left" style="color:#f368e0"></i> CAMBIAR COINS</div>
        <div class="menu-btn" onclick="openChannel()"><i class="fa-brands fa-telegram" style="color:#3498db"></i> CANAL OFICIAL</div>
        <div class="menu-btn" onclick="withdraw()"><i class="fa-solid fa-gem" style="color:#2ecc71"></i> RETIRAR</div>
    </div>

    <div class="food-belt">
        <div class="food-item" onclick="feed(0)">
            <div class="food-count" id="cnt0">5</div>
            <div class="food-icon" style="border-color:#e74c3c"><i class="fa-solid fa-apple-whole" style="color:#e74c3c"></i></div>
            <span style="font-size:10px;">Manzana</span>
        </div>
        <div class="food-item" onclick="feed(1)">
            <div class="food-count" id="cnt1">3</div>
            <div class="food-icon" style="border-color:#3498db"><i class="fa-solid fa-fish" style="color:#3498db"></i></div>
            <span style="font-size:10px;">Salm√≥n</span>
        </div>
        <div class="food-item" onclick="feed(2)">
            <div class="food-count" id="cnt2">1</div>
            <div class="food-icon" style="border-color:#f1c40f"><i class="fa-solid fa-pizza-slice" style="color:#f1c40f"></i></div>
            <span style="font-size:10px;">Pizza VIP</span>
        </div>
    </div>

    <div class="modal-overlay" id="shopModal">
        <div class="shop-card">
            <i class="fa-solid fa-basket-shopping" style="font-size: 50px; color: var(--gold); margin-bottom: 20px;"></i>
            <h2 style="margin:0; color:white;">¬°NEVERA VAC√çA!</h2>
            <p style="color:#aaa; font-size:13px; margin: 15px 0;">Tu mascota necesita comida. Ve un video para comprar m√°s.</p>
            <button class="btn-buy" onclick="buyFood()">VER VIDEO (+COMIDA)</button>
            <div style="margin-top:15px; font-size:10px; color:#aaa; cursor:pointer;" onclick="closeShop()">Cerrar</div>
        </div>
    </div>
    
    <div class="modal-overlay" id="sleepModal">
        <div class="shop-card" style="border-color:#8e44ad;">
            <i class="fa-solid fa-bed" style="font-size: 50px; color: #8e44ad; margin-bottom: 20px;"></i>
            <h2 style="margin:0; color:white;">MASCOTA DORMIDA</h2>
            <p style="color:#aaa; font-size:13px; margin: 15px 0;">Tu mascota se ha cansado (L√≠mite Diario). D√©jala descansar hasta ma√±ana.</p>
            <button class="btn-buy" style="background:#8e44ad; color:white;" onclick="closeSleep()">ENTENDIDO</button>
        </div>
    </div>

    <div class="receipt-modal" id="receiptModal">
        <div class="receipt-ticket">
            <div class="receipt-header">
                <i class="fa-solid fa-receipt" style="font-size:30px; margin-bottom:5px;"></i><br>
                COMPROBANTE DE RETIRO
            </div>
            
            <div class="receipt-row">
                <span>FECHA:</span>
                <span id="recDate">...</span>
            </div>
            <div class="receipt-row">
                <span>HORA:</span>
                <span id="recTime">...</span>
            </div>
            <div class="receipt-row">
                <span>USUARIO:</span>
                <span id="recUser">...</span>
            </div>
            <div class="receipt-row">
                <span>ID TRANS:</span>
                <span id="recID">...</span>
            </div>

            <div class="receipt-total">
                <span>TOTAL:</span>
                <span id="recAmount">$0.00</span>
            </div>

            <div class="receipt-status">PENDIENTE DE PAGO</div>
            
            <p style="font-size:10px; text-align:center; margin-top:10px; color:#555;">Captura este recibo y env√≠alo a soporte.</p>

            <button class="btn-support" onclick="contactSupport()">
                <i class="fa-solid fa-headset"></i> ENVIAR A SOPORTE
            </button>
            
            <button style="width:100%; border:none; background:none; color:#999; margin-top:10px; cursor:pointer;" onclick="location.reload()">Cerrar</button>
        </div>
    </div>
    <script>
        const tg = window.Telegram.WebApp; tg.expand();
        const ADS_ID = "18897"; 
        const KEY = 'crypto_pet_ref_v4';
        
        // --- CONFIGURACI√ìN ---
        const CHANNEL_URL = "https://t.me/noticebuddy"; 
        const BOT_USERNAME = "YougamefavoriteBot"; 
        const SUPPORT_BOT = "https://t.me/AtencionYougamefavoriteBot"; 
        
        const MAX_DAILY_ADS = 15; 
        const COIN_RATE = 5000;
        const TARGET = 2.00;
        
        let user = { 
            usd: 0.00, 
            coins: 0, 
            food: [5, 3, 1],
            adsToday: 0,
            lastDate: ""
        };

        // --- SISTEMA ---
        function checkStatus() {
            let today = new Date().toDateString();
            if(user.lastDate !== today) {
                user.adsToday = 0; user.lastDate = today; save();
            }
            updateVisuals();
        }

        function updateVisuals() {
            let pet = document.getElementById('pet');
            let zzz = document.getElementById('sleepZ');
            let stat = document.getElementById('statusPet');

            if(user.adsToday >= MAX_DAILY_ADS) {
                pet.classList.add('sleeping'); pet.innerText = 'üò¥'; zzz.style.display = 'block';
                stat.innerText = "Durmiendo"; stat.style.color = "#aaa";
            } else {
                pet.classList.remove('sleeping'); pet.innerText = 'üò∫'; zzz.style.display = 'none';
                stat.innerText = "Activo"; stat.style.color = "#2ecc71";
            }
            
            document.getElementById('usd').innerText = user.usd.toFixed(2);
            document.getElementById('coins').innerText = Math.floor(user.coins);
            document.getElementById('cnt0').innerText = user.food[0];
            document.getElementById('cnt1').innerText = user.food[1];
            document.getElementById('cnt2').innerText = user.food[2];
        }

        // --- ACCIONES ---
        function feed(type) {
            checkStatus();
            if(user.adsToday >= MAX_DAILY_ADS) { document.getElementById('sleepModal').style.display = 'flex'; return; }
            if(user.food[type] <= 0) { document.getElementById('shopModal').style.display = 'flex'; return; }

            user.food[type]--;
            animatePet();

            let rand = Math.random();
            if(rand < 0.05) { 
                let amt = (Math.random() * (0.04) + 0.01); user.usd += amt;
                say(`¬°Yummy! üíµ +$${amt.toFixed(2)}`); floatTxt(`+$${amt.toFixed(2)}`, '#2ecc71');
                tg.HapticFeedback.notificationOccurred('success');
            } else { 
                let amt = Math.floor(Math.random()*50)+10; user.coins += amt;
                say("¬°Rico! üòª"); floatTxt(`+${amt} COINS`, '#ffd700');
                tg.HapticFeedback.impactOccurred('light');
            }
            save();
        }

        function buyFood() {
            checkStatus();
            if(user.adsToday >= MAX_DAILY_ADS) { document.getElementById('shopModal').style.display='none'; document.getElementById('sleepModal').style.display='flex'; return; }

            const Ad = window.Adsgram.init({ blockId: ADS_ID });
            Ad.show().then(() => {
                user.food = [5, 3, 1]; user.adsToday++;
                document.getElementById('shopModal').style.display = 'none';
                say("¬°Gracias! ‚ù§Ô∏è"); save();
                if(user.adsToday >= MAX_DAILY_ADS) setTimeout(() => { updateVisuals(); }, 1000);
            }).catch(() => {
                if(typeof show_10278425 === 'function') {
                    show_10278425().then(() => {
                        user.food = [5, 3, 1]; user.adsToday++;
                        document.getElementById('shopModal').style.display='none'; save(); checkStatus();
                    }).catch(()=>{ tg.showAlert("Error en la tienda."); });
                }
            });
        }

        // --- SISTEMA DE REFERIDOS ---
        function inviteFriends() {
            let userId = tg.initDataUnsafe?.user?.id || "0000";
            let inviteLink = `https://t.me/${BOT_USERNAME}?start=ref_${userId}`;
            let shareText = `üéÅ ¬°Gana dinero cuidando a tu Mascota VIP! Entra con mi enlace y recibe un bono especial.`;
            
            let shareUrl = `https://t.me/share/url?url=${encodeURIComponent(inviteLink)}&text=${encodeURIComponent(shareText)}`;
            tg.openTelegramLink(shareUrl);
        }

        // --- RETIRO CON RECIBO ---
        function withdraw() {
            if(user.usd < TARGET) { tg.showAlert(`M√≠nimo $${TARGET}`); return; }
            
            let amount = user.usd.toFixed(2);
            user.usd = 0; // RESTA
            save();

            let now = new Date();
            let userName = tg.initDataUnsafe?.user?.first_name || "Usuario VIP";
            
            document.getElementById('recDate').innerText = now.toLocaleDateString();
            document.getElementById('recTime').innerText = now.toLocaleTimeString();
            document.getElementById('recUser').innerText = userName.substring(0, 15);
            document.getElementById('recAmount').innerText = `$${amount} USD`;
            document.getElementById('recID').innerText = "#" + Math.floor(Math.random()*900000 + 100000);

            document.getElementById('receiptModal').style.display = 'flex';
        }

        function contactSupport() { tg.openTelegramLink(SUPPORT_BOT); }
        function openChannel() { tg.openTelegramLink(CHANNEL_URL); }

        function exchange() {
            if(user.coins < 1000) { tg.showAlert("M√≠nimo 1000 Coins."); return; }
            let val = user.coins / COIN_RATE; user.coins = 0; user.usd += val;
            save(); tg.showPopup({title:"Cambio", message:`Recibiste $${val.toFixed(3)}`});
        }
        
        function openTasks() { tg.showAlert("Sin encuestas disponibles hoy."); }

        // --- UTILS ---
        function animatePet() { let p = document.getElementById('pet'); p.style.transform = "scale(1.3) rotate(10deg)"; setTimeout(() => { p.style.transform = "scale(1)"; }, 200); }
        function say(txt) { let b = document.getElementById('bubble'); b.innerText = txt; b.style.opacity = 1; setTimeout(() => { b.style.opacity = 0; }, 2000); }
        function floatTxt(txt, col) { let el = document.createElement('div'); el.className = 'float-txt'; el.innerText = txt; el.style.color = col; el.style.left = '50%'; el.style.top = '40%'; document.body.appendChild(el); setTimeout(() => el.remove(), 1000); }
        function tapPet() { checkStatus(); (user.adsToday >= MAX_DAILY_ADS) ? say("Zzz... üò¥") : say("¬°Comida! üò∫"); }
        function closeShop() { document.getElementById('shopModal').style.display = 'none'; }
        function closeSleep() { document.getElementById('sleepModal').style.display = 'none'; }

        // LOAD
        function load() {
            tg.CloudStorage.getItem(KEY, (e,v) => {
                if(!e && v) { try { let c=JSON.parse(v); if(c.usd > user.usd) user=c; } catch(x){} }
                checkStatus();
            });
            if(localStorage.getItem(KEY)) {
                try { let l=JSON.parse(atob(localStorage.getItem(KEY))); if(l.usd > user.usd) user=l; } catch(x){}
            }
            checkStatus();
        }
        function save() {
            let s = JSON.stringify(user);
            localStorage.setItem(KEY, btoa(s)); tg.CloudStorage.setItem(KEY, s);
            updateVisuals();
        }

        if(tg.platform==='unknown' || tg.platform==='tdesktop' || tg.platform==='web') {
            document.getElementById('banScreen').style.display='flex';
        } else {
            load();
        }
    </script>
</body>
</html>
